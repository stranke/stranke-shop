<?php require($_SERVER["DOCUMENT_ROOT"] . "/bitrix/modules/main/include/prolog_before.php"); ?>
<?php

if (isset($_REQUEST["ADD_ITEM"]) && $_REQUEST["ADD_ITEM"] == "Y") {
    $APPLICATION->IncludeComponent(
            "bitrix:catalog.element", "ajax_offers_buy_list", array(
        "IBLOCK_TYPE" => $_REQUEST["PARAMS"]["IBLOCK_TYPE"],
        "IBLOCK_ID" => $_REQUEST["PARAMS"]["IBLOCK_ID"],
        "PROPERTY_CODE" => $_REQUEST["PARAMS"]["PROPERTY_CODE"],
        "META_KEYWORDS" => "",
        "META_DESCRIPTION" => "",
        "BROWSER_TITLE" => "N",
        "BASKET_URL" => $_REQUEST["PARAMS"]["BASKET_URL"],
        "ACTION_VARIABLE" => $_REQUEST["PARAMS"]["ACTION_VARIABLE"],
        "PRODUCT_ID_VARIABLE" => $_REQUEST["PARAMS"]["PRODUCT_ID_VARIABLE"],
        "SECTION_ID_VARIABLE" => $_REQUEST["PARAMS"]["SECTION_ID_VARIABLE"],
        "PRODUCT_QUANTITY_VARIABLE" => $_REQUEST["PARAMS"]["PRODUCT_QUANTITY_VARIABLE"],
        "PRODUCT_PROPS_VARIABLE" => $_REQUEST["PARAMS"]["PRODUCT_PROPS_VARIABLE"],
        "CACHE_TYPE" => "N",
        "CACHE_TIME" => "",
        "CACHE_GROUPS" => "",
        "SET_TITLE" => "N",
        "SET_STATUS_404" => "N",
        "PRICE_CODE" => $_REQUEST["PARAMS"]["PRICE_CODE"],
        "USE_PRICE_COUNT" => $_REQUEST["PARAMS"]["USE_PRICE_COUNT"],
        "SHOW_PRICE_COUNT" => $_REQUEST["PARAMS"]["SHOW_PRICE_COUNT"],
        "PRICE_VAT_INCLUDE" => $_REQUEST["PARAMS"]["PRICE_VAT_INCLUDE"],
        "PRICE_VAT_SHOW_VALUE" => $_REQUEST["PARAMS"]["PRICE_VAT_SHOW_VALUE"],
        "USE_PRODUCT_QUANTITY" => $_REQUEST["PARAMS"]['USE_PRODUCT_QUANTITY'],
        "PRODUCT_PROPERTIES" => $_REQUEST["PARAMS"]["PRODUCT_PROPERTIES"],
        "ADD_PROPERTIES_TO_BASKET" => (isset($_REQUEST["PARAMS"]["ADD_PROPERTIES_TO_BASKET"]) ? $_REQUEST["PARAMS"]["ADD_PROPERTIES_TO_BASKET"] : ''),
        "PARTIAL_PRODUCT_PROPERTIES" => (isset($_REQUEST["PARAMS"]["PARTIAL_PRODUCT_PROPERTIES"]) ? $_REQUEST["PARAMS"]["PARTIAL_PRODUCT_PROPERTIES"] : ''),
        "LINK_IBLOCK_TYPE" => $_REQUEST["PARAMS"]["LINK_IBLOCK_TYPE"],
        "LINK_IBLOCK_ID" => $_REQUEST["PARAMS"]["LINK_IBLOCK_ID"],
        "LINK_PROPERTY_SID" => $_REQUEST["PARAMS"]["LINK_PROPERTY_SID"],
        "LINK_ELEMENTS_URL" => $_REQUEST["PARAMS"]["LINK_ELEMENTS_URL"],
        "OFFERS_CART_PROPERTIES" => $_REQUEST["PARAMS"]["OFFERS_CART_PROPERTIES"],
        "OFFERS_FIELD_CODE" => array(1 => "NAME"), //$_REQUEST["PARAMS"]["DETAIL_OFFERS_FIELD_CODE"],
        "OFFERS_PROPERTY_CODE" => $_REQUEST["PARAMS"]["OFFERS_PROPERTY_CODE"],
        "OFFERS_SORT_FIELD" => $_REQUEST["PARAMS"]["OFFERS_SORT_FIELD"],
        "OFFERS_SORT_ORDER" => $_REQUEST["PARAMS"]["OFFERS_SORT_ORDER"],
        "OFFERS_SORT_FIELD2" => $_REQUEST["PARAMS"]["OFFERS_SORT_FIELD2"],
        "OFFERS_SORT_ORDER2" => $_REQUEST["PARAMS"]["OFFERS_SORT_ORDER2"],
        "ELEMENT_ID" => $_REQUEST["ITEM_ID"],
        "ELEMENT_CODE" => "",
        "SECTION_ID" => "",
        "SECTION_CODE" => "",
        "SECTION_URL" => "",
        "DETAIL_URL" => "",
        'CONVERT_CURRENCY' => $_REQUEST["PARAMS"]['CONVERT_CURRENCY'],
        'CURRENCY_ID' => $_REQUEST["PARAMS"]['CURRENCY_ID'],
        'HIDE_NOT_AVAILABLE' => $_REQUEST["PARAMS"]["HIDE_NOT_AVAILABLE"],
        'USE_ELEMENT_COUNTER' => $_REQUEST["PARAMS"]['USE_ELEMENT_COUNTER'],
        "COMPARE_NAME" => $_REQUEST["PARAMS"]["COMPARE_NAME"],
        "COMPARE_FIELD_CODE" => $_REQUEST["PARAMS"]["COMPARE_FIELD_CODE"],
        "COMPARE_PROPERTY_CODE" => $_REQUEST["PARAMS"]["COMPARE_PROPERTY_CODE"],
        "COMPARE_OFFERS_FIELD_CODE" => $_REQUEST["PARAMS"]["COMPARE_OFFERS_FIELD_CODE"],
        "COMPARE_OFFERS_PROPERTY_CODE" => $_REQUEST["PARAMS"]["COMPARE_OFFERS_PROPERTY_CODE"],
        "COMPARE_ELEMENT_SORT_FIELD" => $_REQUEST["PARAMS"]["COMPARE_ELEMENT_SORT_FIELD"],
        "COMPARE_ELEMENT_SORT_ORDER" => $_REQUEST["PARAMS"]["COMPARE_ELEMENT_SORT_ORDER"],
        'ADD_PICT_PROP' => $_REQUEST["PARAMS"]['ADD_PICT_PROP'],
        'LABEL_PROP' => $_REQUEST["PARAMS"]['LABEL_PROP'],
        'OFFER_ADD_PICT_PROP' => $_REQUEST["PARAMS"]['OFFER_ADD_PICT_PROP'],
        'OFFER_TREE_PROPS' => $_REQUEST["PARAMS"]['OFFER_TREE_PROPS'],
        'PRODUCT_SUBSCRIPTION' => $_REQUEST["PARAMS"]['PRODUCT_SUBSCRIPTION'],
        'SHOW_DISCOUNT_PERCENT' => $_REQUEST["PARAMS"]['SHOW_DISCOUNT_PERCENT'],
        'SHOW_OLD_PRICE' => $_REQUEST["PARAMS"]['SHOW_OLD_PRICE'],
        'SHOW_MAX_QUANTITY' => $_REQUEST["PARAMS"]['DETAIL_SHOW_MAX_QUANTITY'],
        'MESS_BTN_BUY' => $_REQUEST["PARAMS"]['MESS_BTN_BUY'],
        'MESS_BTN_ADD_TO_BASKET' => $_REQUEST["PARAMS"]['MESS_BTN_ADD_TO_BASKET'],
        'MESS_BTN_SUBSCRIBE' => $_REQUEST["PARAMS"]['MESS_BTN_SUBSCRIBE'],
        'MESS_BTN_COMPARE' => $_REQUEST["PARAMS"]['MESS_BTN_COMPARE'],
        'MESS_NOT_AVAILABLE' => $_REQUEST["PARAMS"]['MESS_NOT_AVAILABLE'],
        'USE_VOTE_RATING' => $_REQUEST["PARAMS"]['DETAIL_USE_VOTE_RATING'],
        'VOTE_DISPLAY_AS_RATING' => (isset($_REQUEST["PARAMS"]['DETAIL_VOTE_DISPLAY_AS_RATING']) ? $_REQUEST["PARAMS"]['DETAIL_VOTE_DISPLAY_AS_RATING'] : ''),
        'USE_COMMENTS' => $_REQUEST["PARAMS"]['DETAIL_USE_COMMENTS'],
        'BLOG_USE' => (isset($_REQUEST["PARAMS"]['DETAIL_BLOG_USE']) ? $_REQUEST["PARAMS"]['DETAIL_BLOG_USE'] : ''),
        'VK_USE' => (isset($_REQUEST["PARAMS"]['DETAIL_VK_USE']) ? $_REQUEST["PARAMS"]['DETAIL_VK_USE'] : ''),
        'VK_API_ID' => (isset($_REQUEST["PARAMS"]['DETAIL_VK_API_ID']) ? $_REQUEST["PARAMS"]['DETAIL_VK_API_ID'] : 'API_ID'),
        'FB_USE' => (isset($_REQUEST["PARAMS"]['DETAIL_FB_USE']) ? $_REQUEST["PARAMS"]['DETAIL_FB_USE'] : ''),
        'FB_APP_ID' => (isset($_REQUEST["PARAMS"]['DETAIL_FB_APP_ID']) ? $_REQUEST["PARAMS"]['DETAIL_FB_APP_ID'] : ''),
        'BRAND_USE' => (isset($_REQUEST["PARAMS"]['DETAIL_BRAND_USE']) ? $_REQUEST["PARAMS"]['DETAIL_BRAND_USE'] : 'N'),
        'BRAND_PROP_CODE' => (isset($_REQUEST["PARAMS"]['DETAIL_BRAND_PROP_CODE']) ? $_REQUEST["PARAMS"]['DETAIL_BRAND_PROP_CODE'] : ''),
        'DISPLAY_NAME' => (isset($_REQUEST["PARAMS"]['DETAIL_DISPLAY_NAME']) ? $_REQUEST["PARAMS"]['DETAIL_DISPLAY_NAME'] : ''),
        'ADD_DETAIL_TO_SLIDER' => (isset($_REQUEST["PARAMS"]['DETAIL_ADD_DETAIL_TO_SLIDER']) ? $_REQUEST["PARAMS"]['DETAIL_ADD_DETAIL_TO_SLIDER'] : ''),
        'TEMPLATE_THEME' => (isset($_REQUEST["PARAMS"]['TEMPLATE_THEME']) ? $_REQUEST["PARAMS"]['TEMPLATE_THEME'] : ''),
        "ADD_SECTIONS_CHAIN" => (isset($_REQUEST["PARAMS"]["ADD_SECTIONS_CHAIN"]) ? $_REQUEST["PARAMS"]["ADD_SECTIONS_CHAIN"] : ''),
        "ADD_ELEMENT_CHAIN" => (isset($_REQUEST["PARAMS"]["ADD_ELEMENT_CHAIN"]) ? $_REQUEST["PARAMS"]["ADD_ELEMENT_CHAIN"] : ''),
        "DISPLAY_PREVIEW_TEXT_MODE" => (isset($_REQUEST["PARAMS"]['DETAIL_DISPLAY_PREVIEW_TEXT_MODE']) ? $_REQUEST["PARAMS"]['DETAIL_DISPLAY_PREVIEW_TEXT_MODE'] : ''),
        "DETAIL_PICTURE_MODE" => (isset($_REQUEST["PARAMS"]['DETAIL_DETAIL_PICTURE_MODE']) ? $_REQUEST["PARAMS"]['DETAIL_DETAIL_PICTURE_MODE'] : '')
            ), false
    );
}
?>